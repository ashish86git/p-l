<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Daily P&L Dashboard</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
  <style>
    body { background-color: #f5f7fa; }
    h2 { color: #0d6efd; }
    .card-header { background-color: #0d6efd; color: white; font-weight: bold; }
    .table thead th { background-color: #0d6efd; color: white; }
    .table tbody tr:hover { background-color: #e9f5ff; }
    tr.total-row { font-weight: bold; background-color: #cfe2ff; border-top: 3px solid #0d6efd; }
    .quick-filters .btn { margin-right: 5px; margin-bottom: 5px; }
  </style>
</head>
<body>
  <div class="container mt-5">
    <h2 class="mb-4 text-center">üìä Daily P&L Dashboard</h2>

    <!-- Filter Card -->
    <div class="card shadow-sm mb-4">
      <div class="card-header">Filter & Quick Date Selection</div>
      <div class="card-body">
        <form method="get" action="{{ url_for('index') }}" class="row g-3 align-items-end">
          <div class="col-md-3">
            <label for="start_date" class="form-label">Start Date</label>
            <input type="date" class="form-control" name="start_date" id="start_date" value="{{ request.args.get('start_date','') }}">
          </div>
          <div class="col-md-3">
            <label for="end_date" class="form-label">End Date</label>
            <input type="date" class="form-control" name="end_date" id="end_date" value="{{ request.args.get('end_date','') }}">
          </div>
          <div class="col-md-2">
            <button type="submit" class="btn btn-primary w-100">
              <i class="bi bi-funnel"></i> Apply
            </button>
          </div>
          <div class="col-md-4 text-end">
            <!-- Buttons -->
            <a href="{{ url_for('master_data') }}" class="btn btn-outline-secondary me-2">
              ‚öôÔ∏è Master/Rates Input
            </a>
            <a href="{{ url_for('input_data') }}" class="btn btn-outline-success">
              ‚úèÔ∏è Input Daily Data
            </a>
          </div>
        </form>

        <!-- Quick Date Filters -->
        <div class="mt-3 quick-filters">
          <a href="{{ url_for('index', start_date=today, end_date=today) }}" class="btn btn-sm btn-info text-white">Today</a>
          <a href="{{ url_for('index', start_date=week_start, end_date=today) }}" class="btn btn-sm btn-info text-white">This Week</a>
          <a href="{{ url_for('index', start_date=month_start, end_date=today) }}" class="btn btn-sm btn-info text-white">This Month</a>
          <a href="{{ url_for('index', start_date=year_start, end_date=today) }}" class="btn btn-sm btn-info text-white">This Year</a>
        </div>
      </div>
    </div>

    <!-- P&L Table -->
    <div class="table-responsive shadow-sm">
      {% if daily_table %}
        {{ daily_table|safe }}
      {% else %}
        <div class="alert alert-warning text-center mt-3">
          No P&L data available for the selected period. Please adjust the dates.
        </div>
      {% endif %}
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
